import*as t from"fp-ts/Either";import{pipe as n,flow as r,absurd as e,identity as o,not as u}from"fp-ts/function";import{toNestError as a,validateFieldsNatively as i}from"@hookform/resolvers";import{TaggedUnionType as f,UnionType as s,IntersectionType as c,ExactType as p,RefinementType as m}from"io-ts";import*as l from"fp-ts/ReadonlyArray";import*as d from"fp-ts/Option";import*as y from"fp-ts/Semigroup";import*as g from"fp-ts/ReadonlyRecord";function v(){return v=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])}return t},v.apply(this,arguments)}var h=function(r){return r.reduce(function(r,e,o){return n(e,t.fold(function(t){return(o>0?".":"")+t},function(t){return"["+t+"]"}),function(t){return""+r+t})},"")},O=["path"],b=[f,s,c,p,m],x=function(a){var i,f=n(i=a.context,l.filterMapWithIndex(function(t,n){var r=t-1,e=-1===r?void 0:i[r];return void 0===e||b.some(function(t){return e.type instanceof t})?d.none:d.some(n)}),l.map(function(t){return t.key}),l.map(function(r){return n(r,function(t){return parseInt(t,10)},t.fromPredicate(u(Number.isNaN),function(){return r}))}),l.toArray,h);return{message:n(a.message,t.fromNullable(a.context),t.mapLeft(r(l.last,d.map(function(t){return"expected "+t.type.name+" but got "+JSON.stringify(t.actual)}),d.getOrElseW(function(){return e("Error context is missing name")}))),t.getOrElseW(o)),type:n(a.context,l.last,d.map(function(t){return t.type.name}),d.getOrElse(function(){return"unknown"})),path:f}},N=function(t){return n(t,l.map(function(t){var n;return(n={})[t.path]={type:t.type,message:t.message},n}),function(t){return y.fold({concat:function(t,n){return Object.assign({},n,t)}})({},t)})},j={concat:function(t,n){var r;return v({},n,{types:v({},t.types,(r={},r[t.type]=t.message,r[n.type]=n.message,r))})}},E=function(t){return n(g.fromFoldableMap(j,l.Foldable)(t,function(t){return[t.path,t]}),g.map(function(t){return function(t,n){if(null==t)return{};var r,e,o={},u=Object.keys(t);for(e=0;e<u.length;e++)n.indexOf(r=u[e])>=0||(o[r]=t[r]);return o}(t,O)}))},k=function(r){return function(e,o,u){return n(e,r.decode,t.mapLeft((f=!u.shouldUseNativeValidation&&"all"===u.criteriaMode,function(t){var r=f?E:N;return n(t,l.map(x),r)})),t.mapLeft(function(t){return a(t,u)}),t.fold(function(t){return{values:{},errors:t}},function(t){return u.shouldUseNativeValidation&&i({},u),{values:t,errors:{}}}));var f}};export{k as ioTsResolver};
//# sourceMappingURL=io-ts.module.js.map
